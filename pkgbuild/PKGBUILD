# Maintainer: Leonardo Berbert <leo4berbert@gmail.com>

pkgname=comm-wallpapers-hyprland
pkgdesc="Custom wallpapers for Hyprland in BigCommunity distribution"
pkgver=$(date +%y.%m.%d)
pkgrel=$(date +%H%M)
arch=('any')
license=('GPL')
url="https://github.com/communitybig/${pkgname}"
source=("usr/share/backgrounds/community/*" "LICENSE" "README.md")
md5sums=('SKIP' 'SKIP' 'SKIP')

prepare() {
    cd "${srcdir}/${pkgname}"
    # No preparation steps needed
}

build() {
    cd "${srcdir}/${pkgname}"
    # No build steps needed
}

package() {
    cd "${srcdir}"

    # Create target directories
    install -dm755 "${pkgdir}/usr/share/hypr"
    install -dm755 "${pkgdir}/usr/share/backgrounds/community"

    # Copy all wallpapers to /usr/share/backgrounds/community
    cp -a usr/share/backgrounds/community/* "${pkgdir}/usr/share/backgrounds/community/"

    # Create wall*.png files using animal-hpr-001.jpg
    for i in {0..2}; do
        install -m644 usr/share/backgrounds/community/animal-hpr-001.jpg "${pkgdir}/usr/share/hypr/wall${i}.png"
    done

    # Install license file if present
    if [ -f "LICENSE" ]; then
        install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
    fi

    # Install documentation if present
    if [ -f "README.md" ]; then
        install -Dm644 README.md "${pkgdir}/usr/share/doc/${pkgname}/README.md"
    fi
}
